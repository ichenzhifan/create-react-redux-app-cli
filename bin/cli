#!/usr/bin/env node

const path = require('path');
const program = require('commander');
program
  .version(require('../package.json').version, '-v, --version');

program
  .command('create <ProjectName>')
  .description('Create a new Project')
  .action(async (projectName) => {
    // 1. cloneé¡¹ç›®
    const { clone } = require('../lib/download');
    console.log('ğŸš€åˆ›å»ºé¡¹ç›®: ' + projectName);
    await clone('github.com:ichenzhifan/react-redux-base', projectName);
    console.log(`é¡¹ç›®${projectName}åˆ›å»ºæˆåŠŸ`);

    // 2. å®‰è£…ä¾èµ–
    console.log('Installing packages...')
    
    // å°†nodeå·¥ä½œç›®å½•æ›´æ”¹æˆæ„å»ºçš„é¡¹ç›®æ ¹ç›®å½•ä¸‹
    const projectPath = path.resolve(projectName);
    process.chdir(projectPath);
 
    // æ‰§è¡Œå®‰è£…å‘½ä»¤
    require('../lib/install');

    // 3. å¯åŠ¨è°ƒè¯•
    // require('../lib/run');
  })

program.parse(process.argv);